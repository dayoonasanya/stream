<app-navbar></app-navbar>

<div *ngIf="showNotification" class="fixed top-4 right-4 z-50">
  <app-notification 
    [message]="notificationMessage" 
    [type]="notificationType" 
    (close)="showNotification = false">
  </app-notification>
</div>

<div *ngIf="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
  <div class="loader">
    <i class="pi pi-spin pi-spinner text-4xl text-blue-400"></i>
  </div>
</div>

<!-- Reduced the form size -->
<div *ngIf="!loading" class="font-[sans-serif] bg-white flex items-center justify-center md:h-screen py-12">
  <div class="shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)] max-w-3xl max-md:max-w-md rounded-md p-6">
    <div class="grid md:grid-cols-2 items-center gap-6">
      <!-- Reduced image size -->
      <div class="max-md:order-1 lg:min-w-[300px]">
        <img src="assets/login.jpg" class="lg:w-10/12 w-full object-cover" alt="login-image" />
      </div>

      <!-- Reduced form size -->
      <form class="md:max-w-sm w-full mx-auto">
        <div class="mb-8">
          <h3 class="text-3xl font-extrabold text-black">Sign in</h3>
        </div>

        <!-- Input fields with reduced padding and margin -->
        <div class="mb-4">
          <div class="relative flex items-center">
            <input name="email" [(ngModel)]="email" required type="text" class="w-full text-sm border-b border-gray-300 focus:border-blue-400 px-2 py-2 outline-none" placeholder="Enter email" />
            <i class="pi pi-envelope absolute right-2 text-gray-400"></i>
          </div>
        </div>

        <div class="mb-6">
          <div class="relative flex items-center">
            <input name="password" [(ngModel)]="password" required [type]="passwordVisible ? 'text' : 'password'" class="w-full text-sm border-b border-gray-300 focus:border-blue-400 px-2 py-2 outline-none" placeholder="Enter password" />
            <i (click)="togglePasswordVisibility()" class="absolute right-2 text-gray-400 cursor-pointer" [ngClass]="passwordVisible ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
          </div>
        </div>

        <!-- Adjusted button and remember me section -->
        <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
          <div class="flex items-center">
            <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 shrink-0 text-blue-400 focus:ring-blue-500 border-gray-300 rounded" />
            <label for="remember-me" class="text-gray-800 ml-3 block text-sm">Remember me</label>
          </div>
          <div>
            <a [routerLink]="['/forgot-password']" class="text-blue-400 font-semibold text-sm hover:underline">Forgot Password?</a>
          </div>
        </div>

        <!-- Reduced button and form size -->
        <div>
          <button type="button" (click)="onLogin()" [disabled]="isSubmitting" class="w-full shadow-lg py-2 px-4 text-sm font-semibold rounded-md text-white bg-blue-400 hover:bg-blue-500 focus:outline-none">
            <ng-container *ngIf="!isSubmitting">
              Sign in
              <i class="pi pi-sign-in ml-1" style="font-size: 1.0rem;"></i>
            </ng-container>
            <ng-container *ngIf="isSubmitting">
              <i class="pi pi-spin pi-spinner"></i> Signing in...
            </ng-container>
          </button>
          <p class="text-gray-800 text-sm text-center mt-4">Don't have an account? 
            <a [routerLink]="['/register']" class="text-blue-400 font-semibold hover:underline ml-1">Register here</a>
          </p>
        </div>
      </form>
    </div>
  </div>
</div>
